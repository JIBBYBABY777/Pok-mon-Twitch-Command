!commands add !pokemon_test -cd=120 $(eval
  const user = "$(user)";
  const arg  = "$(1)".toLowerCase(); // optional: gen1..gen9
  const pick = a => a[Math.floor(Math.random()*a.length)];
  const load = u => `$(urlfetch ${u})`.split("\n").map(s=>s.trim()).filter(Boolean);

  const G = {
    gen1: { c: load("https://raw.githubusercontent.com/JIBBYBABY777/Pok-mon-Twitch-Command/main/gen1.txt"), l: load("https://raw.githubusercontent.com/JIBBYBABY777/Pok-mon-Twitch-Command/main/gen1_legendary.txt") },
    gen2: { c: load("https://raw.githubusercontent.com/JIBBYBABY777/Pok-mon-Twitch-Command/main/gen2.txt"), l: load("https://raw.githubusercontent.com/JIBBYBABY777/Pok-mon-Twitch-Command/main/gen2_legendary.txt") },
    gen3: { c: load("https://raw.githubusercontent.com/JIBBYBABY777/Pok-mon-Twitch-Command/main/gen3.txt"), l: load("https://raw.githubusercontent.com/JIBBYBABY777/Pok-mon-Twitch-Command/main/gen3_legendary.txt") },
    gen4: { c: load("https://raw.githubusercontent.com/JIBBYBABY777/Pok-mon-Twitch-Command/main/gen4.txt"), l: load("https://raw.githubusercontent.com/JIBBYBABY777/Pok-mon-Twitch-Command/main/gen4_legendary.txt") },
    gen5: { c: load("https://raw.githubusercontent.com/JIBBYBABY777/Pok-mon-Twitch-Command/main/gen5.txt"), l: load("https://raw.githubusercontent.com/JIBBYBABY777/Pok-mon-Twitch-Command/main/gen5_legendary.txt") },
    gen6: { c: load("https://raw.githubusercontent.com/JIBBYBABY777/Pok-mon-Twitch-Command/main/gen6.txt"), l: load("https://raw.githubusercontent.com/JIBBYBABY777/Pok-mon-Twitch-Command/main/gen6_legendary.txt") },
    gen7: { c: load("https://raw.githubusercontent.com/JIBBYBABY777/Pok-mon-Twitch-Command/main/gen7.txt"), l: load("https://raw.githubusercontent.com/JIBBYBABY777/Pok-mon-Twitch-Command/main/gen7_legendary.txt") },
    gen8: { c: load("https://raw.githubusercontent.com/JIBBYBABY777/Pok-mon-Twitch-Command/main/gen8.txt"), l: load("https://raw.githubusercontent.com/JIBBYBABY777/Pok-mon-Twitch-Command/main/gen8_legendary.txt") },
    gen9: { c: load("https://raw.githubusercontent.com/JIBBYBABY777/Pok-mon-Twitch-Command/main/gen9.txt"), l: load("https://raw.githubusercontent.com/JIBBYBABY777/Pok-mon-Twitch-Command/main/gen9_legendary.txt") }
  };

  // Global mythicals
  const myth = load("https://raw.githubusercontent.com/JIBBYBABY777/Pok-mon-Twitch-Command/main/mythicals.txt");

  const keys = Object.keys(G);
  const key  = G[arg] ? arg : pick(keys);

  // Odds
  const pLegendary = 0.05;  // 5%
  const pMythical  = 0.20;  // 20% of legendary -> mythicals

  const hasLegends = G[key].l && G[key].l.length>0;
  const legendary  = Math.random() < pLegendary && hasLegends;

  let pool = G[key].c, tag = "";
  if (legendary) {
    const useMyth = myth && myth.length>0 && Math.random() < pMythical;
    pool = useMyth ? myth : G[key].l;
    tag  = useMyth ? "✨ Mythical " : "✨ Legendary ";
  }

  const mon = pool && pool.length ? pick(pool) : "MissingList";
  `🎉 ${user} caught a ${tag}wild ${mon}! (${key.toUpperCase()})`;
)
